<!DOCTYPE html>
<html lang="en">
<head>
  {% load static %}
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Payment Dashboard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Zono admin is super flexible, powerful, clean &amp; modern responsive bootstrap 5 admin template with unlimited possibilities.">
  <meta name="keywords" content="admin template, Zono admin template, dashboard template, flat admin template, responsive admin template, web app">
  <meta name="author" content="pixelstrap">
  <link rel="icon" href="{% static 'images/favicon.png' %}" type="image/x-icon">
  <link rel="shortcut icon" href="{% static 'images/favicon.png' %}" type="image/x-icon">
  <title>Zono - Premium Admin Template</title>
  <!-- Google font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@200;300;400;600;700;800;900&amp;display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i,900&amp;display=swap" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="{% static 'css/font-awesome.css' %}">
  <!-- ico-font-->
  <link rel="stylesheet" type="text/css" href="{% static 'css/vendors/icofont.css' %}">
  <!-- Themify icon-->
  <link rel="stylesheet" type="text/css" href="{% static 'css/vendors/themify.css' %}">
  <!-- Flag icon-->
  <link rel="stylesheet" type="text/css" href="{% static 'css/vendors/flag-icon.css' %}">
  <!-- Feather icon-->
  <link rel="stylesheet" type="text/css" href="{% static 'css/vendors/feather-icon.css' %}">
  <!-- Plugins css start-->
  <link rel="stylesheet" type="text/css" href="{% static 'css/vendors/slick.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'css/vendors/slick-theme.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'css/vendors/scrollbar.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'css/vendors/jsgrid.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'css/vendors/animate.css' %}">
  <!-- Plugins css Ends-->
  <!-- Bootstrap css-->
  <link rel="stylesheet" type="text/css" href="{% static 'css/vendors/bootstrap.css' %}">
  <!-- App css-->
  <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
  <link id="color" rel="stylesheet" href="{% static 'css/color-1.css' %}" media="screen">
  <!-- Responsive css-->
  <link rel="stylesheet" type="text/css" href="{% static 'css/responsive.css' %}">  
</head>
<style>
  /* 外部容器样式，统一设置最大宽度和居中显示 */
    .profile-container {
      max-width: 600px; /* 设置最大宽度 */
      margin: 0 auto; /* 居中显示 */
      padding: 17px; /* 左右内边距 */
      box-sizing: border-box; /* 包括内边距在内的宽度计算 */
    }

    /* 统一输入框样式 */
    .profile-container .form-control {
      width: 100%; /* 输入框宽度100%，但受容器限制 */
      padding: 10px 12px; /* 输入框内边距 */
      box-sizing: border-box; /* 保证宽度包含内边距 */
    }

    /* 统一标签样式 */
    .profile-container .form-label {
      display: block; /* 标签单独一行显示 */
      margin-bottom: 8px; /* 标签与输入框的间距 */
      color: #333; /* 标签字体颜色 */
      font-weight: bold; /* 标签字体加粗 */
    }

    /* 按钮样式 */
    .profile-container .btn {
      margin-top: 5px; /* 按钮与输入框的间距 */
      padding: 10px;
      width: 100%;
    }
    /* 设置外部容器整体样式 */
    .card {
      padding: 20px; /* 添加内边距 */
      max-width: 800px; /* 设置最大宽度，确保不会过于宽 */
      margin: 0 auto; /* 居中显示 */
      box-sizing: border-box; /* 包括内边距在内计算宽度 */
    }

    /* 输入框和复选框的通用样式 */
    .card .form-control,
    .card input[type="radio"],
    .card input[type="checkbox"] {
      margin-left: 10px; /* 增加左边距 */
    }

    /* 标签与输入框对齐 */
    .card label {
      margin-left: 10px; /* 标签左边距 */
      font-weight: bold; /* 标签加粗 */
      color: #333; /* 标签字体颜色 */
    }

    /* 调整单选框和复选框 */
    .card input[type="radio"],
    .card input[type="checkbox"] {
      margin-right: 5px; /* 控件与标签之间的间距 */
    }

    /* 提交按钮样式 */
    .card-footer .btn {
      margin-top: 10px;
      padding: 10px 20px;
    }
  </style>
<body>

<!-- loader starts-->
<div class="loader-wrapper">
  <div class="theme-loader">    
    <div class="loader-p"></div>
  </div>
</div>
<!-- loader ends-->
<!-- tap on top starts-->
<div class="tap-top"><i data-feather="chevrons-up"></i></div>
<!-- tap on tap ends-->
<!-- page-wrapper Start-->
<div class="page-wrapper compact-wrapper" id="pageWrapper">
  <!-- Page Header Start-->
  {% include 'header.html' %}
  <!-- Page Header Ends                              -->
  <!-- Page Body Start-->
  <div class="page-body-wrapper">
    <!-- Page Sidebar Start-->
    {% include 'sidenav.html' %}
    <!-- Page Sidebar Ends-->
    <div class="page-body">
      <div class="container-fluid">
        <div class="page-title">
          <div class="row">
            <div class="col-xl-3 col-sm-5 box-col-4">                 
            </div>
          </div>
        </div>
      </div>
      <!-- Container-fluid starts-->
      <div class="container">
        <div class="row">
          <!-- 左侧内容 -->
          <div class="col-md-6">
            <div class="card">
              <div class="card-header">
                <h4 class="card-title">Remaining Balance</h4>
              </div>
              <div class="card-body">
                <div class="form-group">
                  <label for="remaining_balance">Remaining Balance</label>
                  <input class="form-control" id="remaining_balance" type="text" value="$99" disabled>
                </div>
                <div class="form-group">
                  <label for="amount">Add Funds</label>
                  <input class="form-control" id="amount" type="number" placeholder="Enter amount">
                </div>
                <div class="form-group">
                  <label for="payment_method">Select Payment Method</label>
                  <ul class="list-group">
                    {% for method in payment_methods %}
                    <li class="list-group-item" data-method-id="{{ method.id }}">
                      <i class="fa fa-cc-{{ method.method|lower }}"></i> {{ method.method }}
                    </li>
                    {% empty %}
                    <li class="list-group-item">No payment methods available</li>
                    {% endfor %}
                  </ul>
                </div>
                <div class="form-group">
                  <label for="add_payment_method">Add Payment Method</label>
                  <select class="form-control" id="add_payment_method">
                    <option value="credit_card">Debit or Credit Card</option>
                    <option value="paypal">PayPal</option>
                    <option value="wire_transfer">Wire Transfer</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
      
          <!-- 右侧内容 -->
          <div class="col-md-6">
            <div class="card">
              <div class="card-header">
                <h4 class="card-title">Subscription</h4>
              </div>
              <div class="card-body">
                <div class="form-group">
                  <label>Subscription Information</label>
                  <p>Current Subscription</p>
                  <p>Member Since: 11/22/2024</p>
                  <p>Payment Interval: Monthly / Yearly</p>
                  <p>Next Payment On: 12/21/2024</p>
                  <p>Next Payment Amount: $5.00</p>
                </div>
                <div class="form-group">
                  <button class="btn btn-primary w-100">Cancel Next Subscription</button>
                </div>
                <div class="form-group">
                  <label for="coupon">Use Coupon</label>
                  <input class="form-control" id="coupon" type="text" placeholder="Enter coupon code">
                </div>
              </div>
              <div class="col-md-3 mt-4">
                <button id="apply-btn" class="btn btn-primary w-100">Apply</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      
      
      <!-- Container-fluid Ends-->
    </div>
    <!-- footer start-->
    {% include 'footer-light.html' %}
  </div>
</div>
  
</body>
</html>
<!-- latest jquery-->
<script src="{% static 'js/jquery.min.js' %}"></script>
<!-- Bootstrap js-->
<script src="{% static 'js/bootstrap/bootstrap.bundle.min.js' %}"></script>
<!-- feather icon js-->
<script src="{% static 'js/icons/feather-icon/feather.min.js' %}"></script>
<script src="{% static 'js/icons/feather-icon/feather-icon.js' %}"></script>
<!-- scrollbar js-->
<script src="{% static 'js/scrollbar/simplebar.js' %}"></script>
<script src="{% static 'js/scrollbar/custom.js' %}"></script>
<!-- Sidebar jquery-->
<script src="{% static 'js/config.js' %}"></script>
<!-- Plugins JS start-->
<script src="{% static 'js/sidebar-menu.js' %}"></script>
<script src="{% static 'js/sidebar-pin.js' %}"></script>
<script src="{% static 'js/slick/slick.min.js' %}"></script>
<script src="{% static 'js/slick/slick.js' %}"></script>
<script src="{% static 'js/header-slick.js' %}"></script>
<script src="{% static 'js/jsgrid/jsgrid.min.js' %}"></script>
<script src="{% static 'js/jsgrid/griddata.js' %}"></script>
<script src="{% static 'js/jsgrid/jsgrid.js' %}"></script>
<!-- Plugins JS Ends-->
<!-- Theme js-->
<script src="{% static 'js/script.js' %}"></script>
<script src="{% static 'js/theme-customizer/customizer.js' %}"></script>
<!-- Plugin used-->
<script>
  document.getElementById('apply-btn').addEventListener('click', function () {
    const amount = document.getElementById('amount').value; // 获取金额
    const selectedMethod = document.querySelector('.payment-methods li'); // 获取选中的支付方式
    const paymentMethodId = selectedMethod ? selectedMethod.getAttribute('data-method-id') : null;

    if (!amount || amount <= 0) {
      alert('Please enter a valid amount.');
      return;
    }

    if (!paymentMethodId) {
      alert('Please select a payment method.');
      return;
    }

    // 提交数据到后端
    fetch('/add-funds/', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'X-CSRFToken': '{{ csrf_token }}', // 确保 CSRF Token 存在
      },
      body: JSON.stringify({
        amount: amount,
        payment_method_id: paymentMethodId, // 发送支付方式 ID
      }),
    })
      .then(response => response.json())
      .then(data => {
        if (data.status === 'success') {
          alert(data.message); // 成功提示
          location.reload(); // 刷新页面
        } else {
          alert(data.message); // 错误提示
        }
      })
      .catch(error => {
        console.error('Error:', error);
        alert('An error occurred. Please try again later.');
      });
  });
</script>

