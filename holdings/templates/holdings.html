<!DOCTYPE html>
<html lang="en">
    <head>
        {% load static %}
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Zono admin is super flexible, powerful, clean &amp; modern responsive bootstrap 5 admin template with unlimited possibilities.">
        <meta name="keywords" content="admin template, Zono admin template, dashboard template, flat admin template, responsive admin template, web app">
        <meta name="author" content="pixelstrap">
        <link rel="icon" href="{% static 'images/favicon.png' %}" type="image/x-icon">
        <link rel="shortcut icon" href="{% static 'images/favicon.png' %}" type="image/x-icon">
        <title>Zono - Premium Admin Template</title>
        <!-- Google font -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
        <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@200;300;400;600;700;800;900&amp;display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i,900&amp;display=swap" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="{% static 'css/font-awesome.css' %}">
        <!-- ico-font-->
        <link rel="stylesheet" type="text/css" href="{% static 'css/vendors/icofont.css' %}">
        <!-- Themify icon-->
        <link rel="stylesheet" type="text/css" href="{% static 'css/vendors/themify.css' %}">
        <!-- Flag icon-->
        <link rel="stylesheet" type="text/css" href="{% static 'css/vendors/flag-icon.css' %}">
        <!-- Feather icon-->
        <link rel="stylesheet" type="text/css" href="{% static 'css/vendors/feather-icon.css' %}">
        <!-- Plugins css start-->
        <link rel="stylesheet" type="text/css" href="{% static 'css/vendors/slick.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/vendors/slick-theme.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/vendors/scrollbar.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/vendors/jsgrid.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/vendors/animate.css' %}">
        <!-- Plugins css Ends-->
        <!-- Bootstrap css-->
        <link rel="stylesheet" type="text/css" href="{% static 'css/vendors/bootstrap.css' %}">
        <!-- App css-->
        <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
        <link id="color" rel="stylesheet" href="{% static 'css/color-1.css' %}" media="screen">
        <!-- Responsive css-->
        <link rel="stylesheet" type="text/css" href="{% static 'css/responsive.css' %}">
    </head>  
    <style>
      .jsgrid-align-center {
          position: sticky; /* 固定列 */
          right: 0; /* 固定在右侧 */
          z-index: 2; /* 确保它显示在其他列的上面 */
          background-color: #fff; /* 背景颜色，防止被覆盖 */
          box-shadow: -2px 0 5px rgba(0, 0, 0, 0.2); /* 给固定列添加阴影效果 */
          width: 100px !important;
      }
      .archived-row {
        border-bottom: 1px dashed #ccc;
      }
      /* 隐藏 jsGrid 默认的删除按钮 */
      .jsgrid-button.jsgrid-delete-button {
          display: none !important;
      }
      .jsgrid .jsgrid-insert-mode-button{
        display: none !important;
      }
      .jsgrid {
        background: transparent;  /* 设置按钮背景透明 */
        border: none;              /* 去除按钮的默认边框 */
        cursor: pointer;           /* 使按钮看起来像点击区域 */
        padding: 5px 10px;         /* 可选：添加内边距 */
      }
      
      .jsgrid:focus {
        outline: none;  /* 去除焦点框 */
      }
      /* 设置图标颜色为灰色 */
      .jsgrid .fa-eye {
        color: gray;  /* 改为灰色 */
      }
      #columnOptions {
        display: none; /* 默认隐藏 */
        position: fixed; /* 固定位置 */
        top: 50%; /* 距顶部 50% */
        left: 50%; /* 距左侧 50% */
        transform: translate(-50%, -50%); /* 中心对齐 */
        z-index: 1000; /* 确保在其他元素上方 */
        background: #fff; /* 背景颜色 */
        padding: 20px; /* 内边距 */
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2); /* 添加阴影效果 */
        border-radius: 8px; /* 圆角边框 */
        width: 300px; /* 弹窗宽度 */
        max-width: 80%; /* 保持弹窗在小屏幕上的适配 */
        max-height: 80vh; /* 设置最大高度为视口高度的 80% */
        overflow-y: auto; /* 超出内容时显示滚动条 */
        text-align: left; /* 文本左对齐 */
      }
      .jsgrid-header-row {
        padding-right: 20px; /* 根据需要增加右边距 */
      }
      
    </style>  
  <body> 
    <!-- Loader Section -->
<div class="loader-wrapper">
    <div class="theme-loader">
      <div class="loader-p"></div>
    </div>
  </div>
  
  <!-- Tap to Top Button -->
  <div class="tap-top">
    <i data-feather="chevrons-up"></i>
  </div>
  
  <!-- Page Wrapper -->
  <div class="page-wrapper compact-wrapper" id="pageWrapper">
    <!-- Header -->
    {% include 'header.html' %}
  
    <!-- Page Body Wrapper -->
    <div class="page-body-wrapper">
      <!-- Sidebar -->
      {% include 'sidenav.html' %}
  
      <!-- Main Content -->
      <div class="page-body">
        <div class="container-fluid">
          <!-- Page Title -->
          <div class="page-title">
            <div class="row">
             <!-- <div class="col-xl-4 col-sm-7 box-col-3">
                <h3>JS Grid Tables</h3>
              </div>
              -->
            </div>
          </div>
  
          <!-- Container Section -->
           
          <div class="container-fluid">
            <div class="row">
              <div class="col-sm-12">
                <div class="card">
                  <div class="card-header pb-0">
                    <h4 class="mb-3">Basic Scenario</h4>
                    <span>Grid with filtering, editing, inserting, deleting, sorting, and paging. Data provided by controller.</span>
                  </div>
                  <div class="column-control" style="position: absolute; right: 20px; top: 40px; z-index: 1000;">
                    <button id="columnSettings" class="btn btn-primary">
                        <i class="fa fa-cog"></i> Configure Columns
                    </button>
                </div>                
                  <div class="card-body">
                    <div class="basic_table" id="basicScenario"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 弹窗 -->
    <div id="columnOptions" class="modal">
      <h4>Manage Columns</h4>
      <ul id="columnSettingsList">
        <li><label><input type="checkbox" class="column-toggle" data-column="Address" checked> Address</label></li>
        <li><label><input type="checkbox" class="column-toggle" data-column="City" checked> City</label></li>
        <li><label><input type="checkbox" class="column-toggle" data-column="Zip" checked> Zip</label></li>
        <li><label><input type="checkbox" class="column-toggle" data-column="Auction Authority" checked> Auction Authority</label></li>
        <li><label><input type="checkbox" class="column-toggle" data-column="State" checked> State</label></li>
        <li><label><input type="checkbox" class="column-toggle" data-column="Amount In Sale" checked> Amount In Sale</label></li>
        <li><label><input type="checkbox" class="column-toggle" data-column="Deposit Deadline" checked> Deposit Deadline</label></li>
        <li><label><input type="checkbox" class="column-toggle" data-column="Auction Start" checked> Auction Start</label></li>
        <li><label><input type="checkbox" class="column-toggle" data-column="Auction End" checked> Auction End</label></li>
        <li><label><input type="checkbox" class="column-toggle" data-column="My Bid" checked> My Bid</label></li>
        <li><label><input type="checkbox" class="column-toggle" data-column="Label" checked> Status</label></li>   
      </ul>    
      <button id="saveColumnSettings" class="btn btn-success">Save</button>
      <button id="closeColumnSettings" class="btn btn-secondary">Cancel</button>
    </div>

  
    <!-- Footer -->
    
      {% include 'footer-light.html' %}
    
    </div>
   
    <script>
    // 点击配置列按钮，显示弹窗
    document.getElementById("columnSettings").addEventListener("click", function () {
      const modal = document.getElementById("columnOptions");
      modal.style.display = "block"; // 显示弹窗
    });

    // 点击取消按钮，隐藏弹窗
    document.getElementById("closeColumnSettings").addEventListener("click", function () {
      const modal = document.getElementById("columnOptions");
      modal.style.display = "none"; // 隐藏弹窗
    });

    // 点击保存按钮，保存设置并更新表格
    document.getElementById("saveColumnSettings").addEventListener("click", function () {
      const grid = $("#basicScenario").data("JSGrid");

      // 遍历复选框，更新字段的显示状态
      document.querySelectorAll(".column-toggle").forEach(function (checkbox) {
          const columnName = checkbox.dataset.column;
          const isVisible = checkbox.checked;

          const fieldIndex = grid.fields.findIndex(field => field.name === columnName);
          if (fieldIndex >= 0) {
              grid.fields[fieldIndex].visible = isVisible; // 更新字段的 visible 属性
          }
      });

      // 更新表格字段并刷新
      $("#basicScenario").jsGrid("option", "fields", grid.fields);
      $("#basicScenario").jsGrid("refresh");

      // 隐藏弹窗
      const modal = document.getElementById("columnOptions");
      modal.style.display = "none";
    });

    </script>
    <script>
      window.addEventListener('resize', () => {
        const grid = $('#grid').data('JSGrid');
        if (grid) {
          grid.refresh(); // 重新渲染表格
        }
      });
      
    </script> 
    <!-- latest jquery-->
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <!-- Bootstrap js-->
    <script src="{% static 'js/bootstrap/bootstrap.bundle.min.js' %}"></script>
    <!-- feather icon js-->
    <script src="{% static 'js/icons/feather-icon/feather.min.js' %}"></script>
    <script src="{% static 'js/icons/feather-icon/feather-icon.js' %}"></script>
    <!-- scrollbar js-->
    <script src="{% static 'js/scrollbar/simplebar.js' %}"></script>
    <script src="{% static 'js/scrollbar/custom.js' %}"></script>
    <!-- Sidebar jquery-->
    <script src="{% static 'js/config.js' %}"></script>
    <!-- Plugins JS start-->
    <script src="{% static 'js/sidebar-menu.js' %}"></script>
    <script src="{% static 'js/sidebar-pin.js' %}"></script>
    <script src="{% static 'js/slick/slick.min.js' %}"></script>
    <script src="{% static 'js/slick/slick.js' %}"></script>
    <script src="{% static 'js/header-slick.js' %}"></script>
    <script src="{% static 'js/jsgrid/jsgrid.min.js' %}"></script>
    <script src="{% static 'js/jsgrid/griddata.js' %}"></script>
    <script src="{% static 'js/jsgrid/jsgrid.js' %}"></script>
    <!-- Plugins JS Ends-->
    <!-- Theme js-->
    <script src="{% static 'js/script.js' %}"></script>
    <script src="{% static 'js/theme-customizer/customizer.js' %}"></script>
    <!-- Plugin used-->
    
  </body>
</html>